============================= test session starts ==============================
platform linux2 -- Python 2.6.4 -- pytest-2.0.1
collecting ... collected 15 items

test_cloud.py .F

=================================== FAILURES ===================================
_________________ TestGetSpotsForRectangle.test_outer_complex __________________

self = <test_cloud.TestGetSpotsForRectangle object at 0xa56796c>

    def test_outer_complex(self):
            r1, r2 = R(0, 0, 10, 30), R(10, 10, 20, 10)
            cloud = RectangleCloud([r1, r2])
            occ = cloud.get_occupied_rect()
    
            spots = cloud.get_spots_for_rectangle(R(0, 0, 20, 20), steps=24)
    
            print (spots)
    
            expected_spots = [
                    R(occ.x + occ.w, occ.y -INF, INF, occ.h + 2 * INF),
                    R(r1.x + r1.w, r2.y + r2.h, INF, INF),
                    R(occ.x - INF, occ.y + occ.h, occ.w + 2 * INF, INF),
                    R(occ.x - INF, occ.y - INF, INF, occ.h + 2 * INF),
                    R(occ.x - INF, occ.y - INF, occ.w + 2 * INF, INF),
                    R(r1.x + r1.w, r2.y - INF, INF, INF)
            ]
    
            assert sorted(spots, key=lambda r: tuple(r)) \
>                           == sorted(expected_spots, key=lambda r: tuple(r))
E           assert ['<Rectangle ...t 173438764>'] == ['<Rectangle (...t 173439052>']
E             At index 3 diff: '<Rectangle (10, 20, 2147483647, 2147483647) at 173438828>' != '<Rectangle (10, -2147483637, 2147483647, 2147483647) at 173438796>'
E             Right contains more items, first extra item: '<Rectangle (30, -2147483647, 2147483647, 4294967324) at 173439052>'

test_cloud.py:252: AssertionError
------------------------------- Captured stdout --------------------------------
{'occ': '<Rectangle (0, 0, 30, 30) at 173439660>', 'results': [], 'self': <rectangles.RectangleCloud object at 0xa567a6c>, 'steps': 24, 'stepped_pi': 0.1308996938995747, 'avoid_zero_div': 9.9999999999999995e-07, 'rectangle': '<Rectangle (0, 0, 20, 20) at 173439052>'}
RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
15.0 1.5e-05 30 15.000015

	vertical cut: 30 15.000015 2147483677 35.000015
	vertical cut: 30 -2147483647 2147483677 2147483677
RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
15.0 4.01925396342 30 19.0192539634

	vertical cut: 30 19.0192539634 2147483677 39.0192539634
	vertical cut: 30 -2147483647 2147483677 2147483677
RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
8.66023403788 5.0 23.6602340379 20

	horizontal cut: 23.6602340379 20 43.6602340379 2147483667
	horizontal cut: 10 20 2147483657 2147483667
RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
4.99999000001 5.0 19.99999 20

	horizontal cut: 19.99999 20 39.99999 2147483667
	horizontal cut: 10 20 2147483657 2147483667
RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
2.88674467929 5.0 17.8867446793 20

	horizontal cut: 17.8867446793 20 37.8867446793 2147483667
	horizontal cut: 10 20 2147483657 2147483667
RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
1.33974060317 5.0 16.3397406032 20

	horizontal cut: 16.3397406032 20 36.3397406032 2147483667
	horizontal cut: 10 20 2147483657 2147483667
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
4.99999999928e-06 5.0 14.999995 20

	horizontal cut: -5.000005 20 14.999995 0
	horizontal cut: aborted on h too small.
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
1.33975132114 5.0 13.6602486789 20

	horizontal cut: -6.33975132114 20 13.6602486789 0
	horizontal cut: aborted on h too small.
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
2.88675801262 5.0 12.1132419874 20

	horizontal cut: -7.88675801262 20 12.1132419874 0
	horizontal cut: aborted on h too small.
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'
horizontal cut
8.66027403786 15.0 6.33972596214 30

	horizontal cut: -13.6602740379 30 6.33972596214 2147483677
	horizontal cut: -2147483647 30 2147483677 2147483677
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
5.0 4.99999000001 10 19.99999

	vertical cut: 10 19.99999 10 39.99999
	vertical cut: aborted on w too small.
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'
vertical cut
15.0 14.99997 0 29.99997

	vertical cut: -2147483647 29.99997 0 49.99997
	vertical cut: -2147483647 -2147483647 0 2147483677
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
5.0 2.88674467929 10 17.8867446793

	vertical cut: 10 17.8867446793 10 37.8867446793
	vertical cut: aborted on w too small.
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'
vertical cut
15.0 8.66023403786 0 23.6602340379

	vertical cut: -2147483647 23.6602340379 0 43.6602340379
	vertical cut: -2147483647 -2147483647 0 2147483677
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
5.0 1.33974060317 10 16.3397406032

	vertical cut: 10 16.3397406032 10 36.3397406032
	vertical cut: aborted on w too small.
RectangleCloud.get_spots_for_rectangle
0 1
'<Rectangle (0, 0, 10, 30) at 173438668>'
vertical cut
15.0 4.01922180952 0 19.0192218095

	vertical cut: -2147483647 19.0192218095 0 39.0192218095
	vertical cut: -2147483647 -2147483647 0 2147483677
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
5.0 5.00000000009e-06 10 14.999995

	vertical cut: 10 -5.000005 10 14.999995
	vertical cut: aborted on w too small.
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'
vertical cut
15.0 1.50000000003e-05 0 14.999985

	vertical cut: -2147483647 -5.000015 0 14.999985
	vertical cut: -2147483647 -2147483647 0 2147483677
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
5.0 1.33975132114 10 13.6602486789

	vertical cut: 10 -6.33975132114 10 13.6602486789
	vertical cut: aborted on w too small.
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'
vertical cut
15.0 4.01925396342 0 10.9807460366

	vertical cut: -2147483647 -9.01925396342 0 10.9807460366
	vertical cut: -2147483647 -2147483647 0 2147483677
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
5.0 2.88675801262 10 12.1132419874

	vertical cut: 10 -7.88675801262 10 12.1132419874
	vertical cut: aborted on w too small.
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'
vertical cut
15.0 8.66027403786 0 6.33972596214

	vertical cut: -2147483647 -13.6602740379 0 6.33972596214
	vertical cut: -2147483647 -2147483647 0 2147483677
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
4.99999000001 5.0 10.00001 10

	horizontal cut: -9.99999000001 -2147483647 10.00001 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'
horizontal cut
14.99997 15.0 2.99999699873e-05 0

	horizontal cut: -19.99997 -2147483647 2.99999699891e-05 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
2.88674467929 5.0 12.1132553207 10

	horizontal cut: -7.88674467929 -2147483647 12.1132553207 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'
horizontal cut
8.66023403786 15.0 6.33976596214 0

	horizontal cut: -13.6602340379 -2147483647 6.33976596214 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
1.33974060317 5.0 13.6602593968 10

	horizontal cut: -6.33974060317 -2147483647 13.6602593968 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
0 0
'<Rectangle (0, 0, 10, 30) at 173438668>'

RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
4.99999999978e-06 5.0 15.000005 10

	horizontal cut: 15.000005 -2147483647 35.000005 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
1.33975132114 5.0 16.3397513211 10

	horizontal cut: 16.3397513211 -2147483647 36.3397513211 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
2.88675801262 5.0 17.8867580126 10

	horizontal cut: 17.8867580126 -2147483647 37.8867580126 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
5.00001000001 5.0 20.00001 10

	horizontal cut: 20.00001 -2147483647 40.00001 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'

RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
horizontal cut
8.66027403788 5.0 23.6602740379 10

	horizontal cut: 23.6602740379 -2147483647 43.6602740379 0
	horizontal cut: -2147483647 -2147483647 2147483677 0
RectangleCloud.get_spots_for_rectangle
1 0
'<Rectangle (10, 10, 20, 10) at 173439372>'
vertical cut
15.0 4.01922180952 30 10.9807781905

	vertical cut: 30 -9.01922180952 2147483677 10.9807781905
	vertical cut: 30 -2147483647 2147483677 2147483677
['<Rectangle (30, -2147483647, 2147483647, 4294967324) at 173438764>', '<Rectangle (10, 20, 2147483647, 2147483647) at 173438828>', '<Rectangle (-2147483647, 30, 4294967324, 2147483647) at 173438092>', '<Rectangle (-2147483647, -2147483647, 2147483647, 4294967324) at 173439404>', '<Rectangle (-2147483647, -2147483647, 4294967324, 2147483647) at 173438988>']
============== 13 tests deselected by 'TestGetSpotsForRectangle' ===============
============== 1 failed, 1 passed, 13 deselected in 0.07 seconds ===============
